<ion-header>
  <ion-toolbar color="primary" mode="ios">

    <ion-buttons slot="start">
      <ion-button (click)="exit()">Exit <ion-icon name="arrow-back" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>Incident Report</ion-title>
  
  </ion-toolbar>
</ion-header>



<ion-content>
  <section class="common-img-bg">
    <div class="container">
      <div class="row">
        <div class="col-sm-12">
          <div class="login-card card-block auth-body mr-auto ml-auto">
            <div class="md-float-material">
              <div class="auth-box">

                <ion-item>
                  <ion-label position="floating">Date</ion-label>
                  <ion-input [(ngModel)]="incident.reportDate" [readonly]="true"></ion-input>
                </ion-item>


                <ion-item>
                  <ion-label position="floating">Manager/ Supervisor</ion-label>
                  <ion-input [readonly]="true" [(ngModel)]="incident.supervisorName"></ion-input>
                </ion-item>`

                <ion-item>
                  <ion-label position="floating" *ngIf="reportV">Reported By</ion-label>
                  <ion-label position="floating" *ngIf="!reportV" style="color:red !important">Reported By</ion-label>
                  <ion-input [(ngModel)]="incident.reportedBy"></ion-input>
                </ion-item>


                <ion-item>
                  <ion-label position="floating" *ngIf="roleV">Role</ion-label>
                  <ion-label position="floating" *ngIf="!roleV" style="color:red !important">Role</ion-label>
                  <ion-input [(ngModel)]="incident.role"></ion-input>
                </ion-item>

                <ion-item>
                  <ion-label position="floating" *ngIf="obV">OB Number *</ion-label>
                  <ion-label position="floating" *ngIf="!obV" style="color:red !important">OB Number *</ion-label>
                  <ion-input [(ngModel)]="incident.incidentOB"></ion-input>
                </ion-item>

                <ion-item>
                  <ion-label position="floating" *ngIf="typeV">Type of Incident *</ion-label>
                  <ion-label position="floating" *ngIf="!typeV" style="color:red !important">Type of Incident
                  </ion-label>
                  <ion-input [(ngModel)]="incident.type"></ion-input>
                </ion-item>

                <ion-item>
                  <ion-label position="floating" *ngIf="incidentDateV">Incident Date *</ion-label>
                  <ion-label position="floating" *ngIf="!incidentDateV" style="color:red !important">Incident Date *
                  </ion-label>
                  <ion-datetime [readonly]="view" displayFormat="YYYY/MM/DD" [(ngModel)]="incident.incidentDate">
                  </ion-datetime>
                </ion-item>

                <ion-item>
                  <ion-label position="floating" *ngIf="incidentTimeV">Incident Time *</ion-label>
                  <ion-label position="floating" *ngIf="!incidentTimeV" style="color:red !important">Incident Time *
                  </ion-label>
                  <ion-datetime [readonly]="view" displayFormat="HH:mm" [(ngModel)]="incident.incidentTime">
                  </ion-datetime>
                </ion-item>


                <ion-item>
                  <ion-label position="floating" *ngIf="siteV">Site Name *</ion-label>
                  <ion-label *ngIf="!siteV" position="floating" style="color:red !important">Site Name *</ion-label>
                  <ion-select interface="popover"*ngIf="!view && !saved" (click)="searchSites(incident)"
                    (ionChange)="getSiteDetails(incident)" [(ngModel)]="incident.siteKey">
                    <ion-select-option *ngFor="let site of sites | async" [value]=site.key>{{site.name}}
                    </ion-select-option>
                  </ion-select>
                  <ion-input *ngIf="view" [readonly]="true" [(ngModel)]="incident.siteName"></ion-input>
                  <ion-input *ngIf="saved" [readonly]="true" [(ngModel)]="incident.siteName"></ion-input>
                </ion-item>



                <div id="text-area">
                  <ion-item>
                    <ion-label position="floating" *ngIf="guardV">Guard Location During Incident *</ion-label>
                    <ion-label position="floating" *ngIf="!guardV" style="color:red !important">Guard Location
                      During Incident * </ion-label>
                    <ion-textarea [readonly]="view" type="text" autocomplete="true" spellcheck="true"
                      [(ngModel)]="incident.guardLocation" autosize>
                    </ion-textarea>
                  </ion-item>





                  <ion-item>
                    <ion-label position="floating" *ngIf="alarmV">Alarm System *</ion-label>
                    <ion-label position="floating" style="color:red !important" *ngIf="!alarmV">Alarm System *
                    </ion-label>
                    <ion-select interface="popover"[(ngModel)]="incident.alarmSystem">
                      <ion-select-option>Yes</ion-select-option>
                      <ion-select-option>No</ion-select-option>
                    </ion-select>
                    <ion-input *ngIf="view" [readonly]="true" [(ngModel)]="incident.alarmSystem"></ion-input>
                  </ion-item>


                  <ion-item>
                    <ion-label position="floating " *ngIf="clientV">Client Notified *</ion-label>
                    <ion-label position="floating" style="color:red !important" *ngIf="!clientV ">Client Notified *</ion-label>
                    <ion-select interface="popover"[(ngModel)]="incident.clientNotify">
                      <ion-select-option>Yes</ion-select-option>
                      <ion-select-option>No</ion-select-option>
                    </ion-select>
                    <ion-input *ngIf="view" [readonly]="true" [(ngModel)]="incident.clientNotify"></ion-input>
                  </ion-item>

                  <ion-item>
                    <ion-label position="floating" *ngIf="suspectsV">Number of Suspects *</ion-label>
                    <ion-label position="floating" *ngIf="!suspectsV" style="color:red !important">Number of Suspects *
                    </ion-label>
                    <ion-input [(ngModel)]="incident.suspectsNumber"></ion-input>
                  </ion-item>

                  <ion-item>
                    <ion-label position="floating" *ngIf="policeV">Police Notified *</ion-label>
                    <ion-label position="floating" style="color:red !important" *ngIf="!policeV">Police Notified *</ion-label>
                    <ion-select interface="popover"[(ngModel)]="incident.policeNotify">
                      <ion-select-option>Yes</ion-select-option>
                      <ion-select-option>No</ion-select-option>
                    </ion-select>
                    <ion-input *ngIf="view" [readonly]="true" [(ngModel)]="incident.policeNotify"></ion-input>
                  </ion-item>

                  <ion-item>
                    <ion-label position="floating" *ngIf="panicV">Panic Button Pressed *</ion-label>
                    <ion-label position="floating" style="color:red !important" *ngIf="!panicV">Panic Button Pressed *</ion-label>
                    <ion-select interface="popover"[(ngModel)]="incident.panicButtonPressed">
                      <ion-select-option>Yes</ion-select-option>
                      <ion-select-option>No</ion-select-option>
                    </ion-select>
                    <ion-input *ngIf="view" [readonly]="true" [(ngModel)]="incident.panicButtonPressed"></ion-input>
                  </ion-item>

                  <ion-item>
                    <ion-label position="floating" *ngIf="crimeV">Crime Scene Cordoned Off *</ion-label>
                    <ion-label position="floating" style="color:red !important" *ngIf="!crimeV">Crime Scene Cordoned Off *</ion-label>
                    <ion-select interface="popover"[(ngModel)]="incident.crimeScene">
                      <ion-select-option>Yes</ion-select-option>
                      <ion-select-option>No</ion-select-option>
                    </ion-select>
                    <ion-input *ngIf="view" [readonly]="true" [(ngModel)]="incident.crimeScene"></ion-input>
                  </ion-item>

                  <ion-item>
                    <ion-label position="floating" *ngIf="cctvV">CCTV Available *</ion-label>
                    <ion-label position="floating" style="color:red !important" *ngIf="!cctvV">CCTV Available *</ion-label>
                    <ion-select interface="popover"[(ngModel)]="incident.cctv">
                      <ion-select-option>Yes</ion-select-option>
                      <ion-select-option>No</ion-select-option>
                    </ion-select>
                    <ion-input *ngIf="view" [readonly]="true" [(ngModel)]="incident.cctv"></ion-input>
                  </ion-item>

                  <ion-item>
                    <ion-label position="floating" *ngIf="discoveryV">Method Of Discovery *</ion-label>
                    <ion-label position="floating" style="color:red !important" *ngIf="!discoveryV">Method Of Discovery *</ion-label>
                    <ion-select interface="popover"[(ngModel)]="incident.discoveryMethod">
                      <ion-select-option>Eye Witness</ion-select-option>
                      <ion-select-option>Hearsay</ion-select-option>
                      <ion-select-option>Phone Call</ion-select-option>
                      <ion-select-option>CCTV</ion-select-option>
                      <ion-select-option>Patrol</ion-select-option>
                    </ion-select>
                    <ion-input *ngIf="view" [readonly]="true" [(ngModel)]="incident.discoveryMethod"></ion-input>
                  </ion-item>

                  <ion-item>
                    <ion-label position="floating" *ngIf="takenV">What Was Taken *</ion-label>
                    <ion-label position="floating" *ngIf="!takenV" style="color:red !important">What Was Taken
                      *</ion-label>
                    <ion-textarea [readonly]="view" type="text" autocomplete="true" spellcheck="true"
                      [(ngModel)]="incident.taken" autosize>
                    </ion-textarea>
                  </ion-item>

                  <ion-item>
                    <ion-label position="floating" *ngIf="injuryV">Any Injuries *</ion-label>
                    <ion-label position="floating" style="color:red !important" *ngIf="!injuryV">Any Injuries *</ion-label>
                    <ion-select interface="popover"[(ngModel)]="incident.injuries">
                      <ion-select-option>Yes</ion-select-option>
                      <ion-select-option>No</ion-select-option>
                    </ion-select>
                    <ion-input *ngIf="view" [readonly]="true" [(ngModel)]="incident.injuries"></ion-input>
                  </ion-item>

                  <ion-item>
                    <ion-label position="floating" *ngIf="entryV">Point Of Entry *</ion-label>
                    <ion-label position="floating" *ngIf="!entryV" style="color:red !important">Point Of Entry
                      *</ion-label>
                    <ion-textarea [readonly]="view" type="text" autocomplete="true" spellcheck="true"
                      [(ngModel)]="incident.EntryPoint" autosize>
                    </ion-textarea>
                  </ion-item>

                  <img [src]="incident.supervisorSign" style="display: block; margin-left: auto; margin-right: auto;"  alt="">

                  <ion-item lines="none">
                    <ion-button  style="margin-left: auto; margin-right: auto;" (click)='openPOP("supervisorSign")'>Add Supervisor Signature
                    </ion-button>
                  </ion-item>

                  <ion-row>
                    <ion-col class="ion-text-center">
                      <ion-item>
                        <ion-label *ngIf="signV" class="ion-text-center">Manager/ Supervisor Signature *</ion-label>
                        <ion-label *ngIf="!signV" class="ion-text-center" style="color:red !important">Manager/
                          Supervisor Signature *
                        </ion-label>
                      </ion-item>
                    </ion-col>
                  </ion-row>


                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</ion-content>


<ion-footer>
  <ion-row>
    <ion-col class="ion-text-center">
      <ion-button style="--background: green;" (click)="check()">
      Submit
      </ion-button>
    </ion-col>
  </ion-row>
</ion-footer>